\usepackage[cn]{optional}

\opt{cn}{%
\usepackage{xeCJK}
\setCJKmainfont{Source Han Serif SC}
\setCJKsansfont{Source Han Sans SC}
\setCJKmonofont{Source Han Mono SC}

\usepackage{zhnumber}
\zhnumsetup{time=Arabic}
\renewcommand{\today}{\zhtoday}
\makeatletter
\def\split@slash#1/#2/#3\@nil{\def\myyear{#1}\def\mymonth{#2}}
\makeatother
\newcommand{\thedate}[1]{%
\setdate{#1}%
{\myyear}年{\stripzeros{\mymonth}}月%
}
\newcommand{\dateprefix}{}%
\newcommand{\datedelimiter}{{\tiny{至}}}
\newcommand{\datenow}{{\tiny{今}}}
\AtBeginDocument{\settowidth{\hintscolumnwidth}{\datedelimiter9999年99月}}
\newcommand{\yr}[1]{
	#1年%
}
}
